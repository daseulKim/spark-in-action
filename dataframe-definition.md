`출처 : [도서] 스파크 완벽 가이드`

> 스파크 2.0 DataFrame API가 소개되고 널리 사용되면서 많은 사람에게 친숙한 SQL과 비슷 한 사용성, 그리고 좋은 성능으로 스파크는 더욱 대중성 있는 프로젝트가 되었습니다. \
>기존에 스파크를 시용하던 사림들은 어렵지 않게 DataFrame의 사용법을 익혔으리라 생긱하지만. 새롭게 스파크를 접히는 사람들에겐 스파크 1.0 시절의 RDD와 DataFrame을 함께 익히느라 적잖이 혼란스러웠으리라 생긱합니다.

##### # RDD 개념
>RDD는 스파크 1.x 버전의 핵심 API입니다. 스파크 2.x 버전에서도 시용할 수 있지만 잘 사용 하지 않습니다. 그러나 시용자가 실행한 모든 DataFrame이나 Dataset 코드 는 RDD로 컴파일됩니다. \
>스피크 UI에서 RDD 단위로 잡이 수행됨을 알 수 있습니다. 그러므로 적어도 RDD가 무엇인지, 어떻게 사용하는지 기본적으로 이해하고 있어야합니다.\
간단히 말해 RDD는 불변성을 가지며 병렬로 처리할 수 있는 파티셔닝된 레코드의 모음입 니다. DataFrame의 각 레코드는 스키마틀 알고 있는 필드로 구성된 구조회된 로우인 반면. RDD의 레코드는 그저 프로그래머가 선택하는 자바, 스칼라, 파이썬의 객체 일 뿐입니다.\
>시용자가 원히는 포맷을 시용해 원하는 모든 데이터를 저장할 수 있습니다.\
>개발자는 강력한 제어권을 가질 수 있지만, 잠재적인 문제가 발생할 수 있습니다. 모든값을 다루거나, 값사이의 싱호작용 과정을 반드시 수동으로 정의해야합니다.\
>또한 구조적 API 와는 다르게 레코드의 내부 구조를 스파크에서 파악할 수 없으므로 최적회를 하려면 훨씬 많은 수작업이 필요합니다.\
예를들어 스파크의 구조적 API는 자동으로 데이터를 최적화하고 입축된 바이너리 포맷으로 저장합니다. 반면 저수준 API에서 동일한 공간 효율성과 성능을 얻으려면 객체에 이런 포맷타입을 구현해 모든 저수준 연산과정에서 시용해야합니다.\
>이와 유시하게 스파크 SQL에서 자동으로 수행되는 필터 재정렬과 집계 같은 최적화 기법도 직접 구현해야합니다. 그러므로 **스피크의 구조적 API를 사용할 것을 강력 하게 권고합니다.**

##### # DataFrame 개념
>RDD는 데이터를 직접 다룰 수 있는 스파크 하위 레벨 인터페이스이자 스파크 런타임의 핵심이다. \
>한편, 스파크 ver.1.3 에서 소개된 DataFrame API 는 컬럼 이름과 타입이 지정된 테이블 형식의 분산 정형 데이터를 손쉽게 다룰 수있는 상위 레벨 인터페이스를 제공한다.\
>스파크 DataFrame(DF) 는 SQL 및 도메인 특화 언어(DSL)로, 작성된 표현식을 최적화된 하위 레벨 RDD 연산으로 변환 해준다.
>따라서 동일한 DataFrame API를 스파크가 지원하는 모든 언어(스칼라,자바,파이썬,R)와 데이터 소스(file, DB 등)에 동일한 방식과 유사한 성능으로 사용할 수 있다. \
>DF는 현재 스파크에서 매우 중요한 기능 중 하나로, 스파크 SQL을 가장 활발한 스파크 컴포넌트로 만드는 원동력이다.\
>스파크 ver.2.0 에서는 DataFrame을 DataSet의 일종으로 구현했다.
>정형 데이터는 데이터 구조를 미리 파악할 수 있다는 장점 덕분에 여러 빅데이터 사례에서도 자주 활용하며, DF는 이러한 정형 데이터를 효과적으로 다룰 수 있는 방법을 제공한다. \
>DF를 사용하면 컬럼이름으로 데이터를 참조할 수 있고, 대다수 데이터 분석가가 자연스럽게 데이터를 조작할 수 있는 SQL를 이용해 데이터에 접근할 수 있다. 또한 DF는 다양한 소스의 데이터를 손쉽게 통합할 수 있도록 지원한다. \
>예를 들어 관계형 DB에 저장된 사용자 프로파일 데이터와 HDFS에 Parquet 파일 형식으로 저장한 사용자 행동 로그 데이터를 조인하는 상황을 가정해보자.(Parquet : 데이터와 스키마를 함께 저장하는 칼럼형 파일 포맷.) \
>먼저 스파크 SQL을 사용해 두 데이터 소르를 각각 DF로 로드한다. DF가 준비되면 이 두 데이터를 조인하고, 다양한 질의를 수행한 후 그 결과를 다시 제 3의 위치에 저장할 수 있다. \
>DF는 RDD와 유사할 뿐 아니라 RDD를 기반으로 동작하기 때문에 RDD 실행 원리들이 여전히 DF에도 유효하다.\
>게다가 DF에는 모든 컬럼의 타입을 미리 지정하므로 RDD에 비해 더 간결하고 손쉽게 쿼리를 작성 할 수 있으며, 쿼리를 DF에 최적화해서 더 나은 성능을 발휘할 수 있다.

##### # RDD 는 언제 사용할까
> 정말 필요한 경우가 아니라면 수동으로 RDD를 생성하면 안 됩니다. RDD는 많은 강점이 있 지만 구조적 API가 제공하는 여러 최적화 기법을 사용할 수 없습니다. DataFrame 은 RDD 보다 더 효율적이고 안정적이며 표현력이 좋습니다.\
>물리적으로 분산된 데이터(자체적으로 구성한 데이터 파티셔닝)에 세부적인 제어가 필요할 때 RDD를 사용하는 것이 가장 적합합니다.
